(this.webpackJsonpmyfolk=this.webpackJsonpmyfolk||[]).push([[0],Array(21).concat([function(e,t,n){},function(e,t,n){},function(e,t){String.prototype.standardizeName=function(){var e=this,t=(e=(e=(e=e.replaceAll("."," ")).replace(/  +/g," ")).trim()).split(" ");if(t.length!=e.replaceAll(" ","").length)for(;1==t[0].length;)t.push(t.shift());return(e=t.join(" ")).toTitleCase()},String.prototype.toCamelCase=function(){return this.toLowerCase().replace(/['"]/g,"").replace(/\W+/g," ").replace(/ (.)/g,(function(e){return e.toUpperCase()})).replace(/ /g,"")},String.prototype.toTitleCase=function(){return this.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))}},function(e,t,n){},function(e,t,n){},,function(e,t,n){},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(1),i=n.n(c),s=n(12),a=n.n(s),o=(n(21),n(22),n(23),n(3)),r=(n(24),n(4)),l=n(5),u=(n(25),n(0)),j=function(){function e(){Object(r.a)(this,e),this.show=function(){},this.hide=function(){}}return Object(l.a)(e,[{key:"setShowFunc",value:function(e){this.show=e}},{key:"setHideFunc",value:function(e){this.hide=e}}]),e}();function d(e){var t=Object(c.useState)(e.show),n=Object(o.a)(t,2),i=n[0],s=n[1],a=this;return Object(c.useEffect)((function(){e.ctl.setShowFunc((function(){s.bind(a)(!0)})),e.ctl.setHideFunc((function(){s.bind(a)(!1)}))}),[]),Object(u.jsx)("div",{className:"spinner-bg-circle ".concat(i?"spinner-show":"spinner-hide"),style:{width:"".concat(e.size||20,"px"),height:"".concat(e.size||20,"px")}})}n(27);var h=function(){function e(){Object(r.a)(this,e),this.show=function(){},this.hide=function(){}}return Object(l.a)(e,[{key:"setShowFunc",value:function(e){this.show=e}},{key:"setHideFunc",value:function(e){this.hide=e}}]),e}();function b(e){var t=Object(c.useState)(!!e.show),n=Object(o.a)(t,2),i=n[0],s=n[1],a=Object(c.useState)(e.text||""),r=Object(o.a)(a,2),l=r[0],j=r[1],d=Object(c.useRef)(null),h=this;return Object(c.useEffect)((function(){e.ctl.setShowFunc((function(e){d.current&&clearTimeout(d.current),j.bind(h)(e),s.bind(h)(!0),d.current=setTimeout((function(){s(!1)}),5e3)})),e.ctl.setHideFunc((function(){s.bind(h)(!1)}))}),[]),Object(u.jsx)("div",{className:"toast toast-".concat(i?"show":"hide"),children:l})}var f=n(9),O=n.n(f),p=n(13);var v={set:function e(t,n,c){if("object"===typeof t)for(var i in t)e(i,t[i]);else{var s=new Date;c=c||999,s.setTime(s.getTime()+24*c*60*60*1e3);var a=";expires="+s.toUTCString();document.cookie=t+"="+n+a}},get:function(e){for(var t=e+"=",n=document.cookie.split(";"),c=0;c<n.length;c++){for(var i=n[c];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return""},clear:function(e){e?document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;":document.cookie.split(";").forEach((function(e){document.cookie=e.replace(/^ +/,"").replace(/=.*/,"=;expires="+(new Date).toUTCString()+";path=/")}))}},m=v,x={name:m.get("name"),phone:m.get("phone"),role:m.get("role"),redirect:function(e){var t=m.get("phone");if(e){if(!t)return;window.open(e,"_self")}else{if(t)return;window.open("/?redirect=".concat(window.location.pathname),"_self")}}},g=function(){function e(){Object(r.a)(this,e),this.name=x.name,this.phone=x.phone,this.role=x.role}return Object(l.a)(e,[{key:"call",value:function(){var e=Object(p.a)(O.a.mark((function e(t,n){var c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/data",{method:"POST",headers:{"Content-Type":"application/json",name:this.name,phone:this.phone,role:this.role,endpoint:t},body:JSON.stringify(n||{})});case 2:return c=e.sent,e.abrupt("return",c.json().then((function(e){return{status:c.status,body:e,error:e.error}})));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),w=g,k=n(29),y=new j,N=new h;var C=function(){Object(c.useEffect)((function(){x.redirect("/home")}),[]);var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],i=t[1],s=Object(c.useRef)(null),a=Object(c.useRef)(null);return Object(u.jsxs)("div",{id:"login-root",children:[Object(u.jsx)(b,{ctl:N}),Object(u.jsx)("img",{id:"login-logo",src:"logo.png"}),Object(u.jsxs)("form",{id:"login-form",children:[Object(u.jsx)("input",{ref:s,type:"tel",placeholder:"Phone",pattern:"[0-9]{10}"}),Object(u.jsx)("input",{ref:a,type:"password",placeholder:"Password"}),Object(u.jsx)("button",{className:"clickable",disabled:n,onClick:function(e){e.preventDefault(),i(!0),y.show(),(new w).call("/login",{phone:s.current.value,password:k(a.current.value)}).then((function(e){if(y.hide(),i(!1),200==e.status){for(var t in e.body)m.set(t,e.body[t]);window.open("/home","_self")}else N.show(e.error)}))},children:"Login"}),Object(u.jsx)("div",{className:"login-spinner",children:Object(u.jsx)(d,{show:n,size:25,ctl:y})})]})]})},S=(n(32),n(33),function(){function e(){Object(r.a)(this,e),this.show=function(){},this.hide=function(){}}return Object(l.a)(e,[{key:"setShowFunc",value:function(e){this.show=e}},{key:"setHideFunc",value:function(e){this.hide=e}}]),e}());function F(e){var t=e.list,n=e.ctl,i=Object(c.useState)(!1),s=Object(o.a)(i,2),a=s[0],r=s[1],l=this;return Object(c.useEffect)((function(){n.setShowFunc((function(){r.bind(l)(!0)})),n.setHideFunc((function(){r.bind(l)(!1)}))}),[]),Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"mainMenu",id:a?"show":"hide",children:[Object(u.jsxs)("div",{className:"mainMenuProfile",children:[Object(u.jsx)("div",{className:"mainMenuProfileAvatar",children:m.get("name").charAt(0).toUpperCase()}),Object(u.jsx)("div",{className:"mainMenuProfileName",children:m.get("name")})]}),t.map((function(e){return Object(u.jsx)("div",{className:"mainMenuItem clickable",children:e})}))]}),a?Object(u.jsx)("div",{className:"glass",onClick:function(){r.bind(l)(!1)}}):null]})}n(34);var M=new S;var P=function(e){var t=e.onPageMenuClick;return Object(u.jsxs)("div",{children:[Object(u.jsx)(F,{ctl:M,list:[1,2,3,4]}),Object(u.jsxs)("div",{className:"appHeader",children:[Object(u.jsx)("i",{className:"bi bi-list clickable clickableIcon",id:"slideMenuButton",onClick:function(){M.show()}}),Object(u.jsx)("img",{src:"/logo.png",className:"header_logo"}),Object(u.jsx)("i",{className:"bi bi-three-dots-vertical clickable clickableIcon",id:"menuButton",onClick:t})]})]})},B=(n(35),function(){function e(){Object(r.a)(this,e),this.show=function(){},this.hide=function(){},this.position=function(){}}return Object(l.a)(e,[{key:"setShowFunc",value:function(e){this.show=e}},{key:"setHideFunc",value:function(e){this.hide=e}},{key:"setPositionFunc",value:function(e){this.position=e}}]),e}());function E(e){var t=e.list,n=e.ctl,i=Object(c.useState)(!1),s=Object(o.a)(i,2),a=s[0],r=s[1],l=Object(c.useState)({right:"0px",top:"0px"}),j=Object(o.a)(l,2),d=j[0],h=j[1],b=this;return Object(c.useEffect)((function(){n.setShowFunc((function(){r.bind(b)(!0)})),n.setHideFunc((function(){r.bind(b)(!1)})),n.setPositionFunc((function(e,t){h.bind(b)({right:e,top:t})}))}),[]),Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:"pageMenu",id:a?"show":"hide",style:d||{},children:t.map((function(e){return Object(u.jsx)("div",{className:"pageMenuItem clickable",children:e})}))}),a?Object(u.jsx)("div",{className:"glass",onClick:function(){r.bind(b)(!1)}}):null]})}var T=new B;var H=function(){return Object(u.jsxs)("div",{children:[Object(u.jsx)(P,{onPageMenuClick:function(){T.position(".5vw","6.5vh"),T.show()}}),Object(u.jsx)(E,{list:[1,2,3,4],ctl:T})]})};n(36),n(37);function I(e){var t=e.children;return Object(u.jsx)("form",{children:t})}n(38);function A(e){var t=e.id,n=e.type,c=e.label,i=e.placeholder,s=e.onBlur,a=e.maxLength,o=e.onChange,r=e.defaultValue,l=e.children;return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{children:c}),Object(u.jsxs)("div",{children:[Object(u.jsx)("input",{id:t||c.toCamelCase(),type:n||"text",defaultValue:r,maxlength:a,placeholder:i,onBlur:s,onChange:o}),Object(u.jsx)("div",{className:"inputAuto",children:l})]})]})}var D=new B;var L=function(){return Object(u.jsxs)("div",{children:[Object(u.jsx)(P,{onPageMenuClick:function(){D.position(".5vw","6.5vh"),D.show()}}),Object(u.jsx)(E,{list:[1,2,3,4],ctl:D}),Object(u.jsx)(I,{children:Object(u.jsx)(A,{label:"Name"})})]})},R=n(16),U=n(2);n(39),n(40);var _=function(e){var t=e.title,n=e.children;return Object(u.jsxs)("div",{className:"titlebar",children:[Object(u.jsx)("div",{className:"titlebar_title",children:t}),Object(u.jsx)("div",{className:"titlebarChildren",children:n})]})},z=new B;var K=function(){return Object(u.jsxs)("div",{children:[Object(u.jsx)(P,{onPageMenuClick:function(){z.position(".5vw","6.5vh"),z.show()}}),Object(u.jsxs)(_,{title:"Contact",children:[Object(u.jsx)("i",{className:"bi bi-whatsapp",onClick:function(){var e=document.getElementById("phone").value;window.open("https://wa.me/91".concat(e))}}),Object(u.jsx)("i",{className:"bi bi-download"})]}),Object(u.jsx)(E,{list:[1,2,3,4],ctl:z}),Object(u.jsxs)(I,{children:[Object(u.jsx)(A,{label:"Name",onBlur:function(e){e.target.value=e.target.value.standardizeName()}}),Object(u.jsx)(A,{label:"Phone",type:"tel",maxLength:10}),Object(u.jsx)("button",{type:"submit",maxLength:10,onClick:function(e){e.preventDefault()},children:"Save"})]})]})};n(41),n(42);var J=n(14),G=n.n(J),q=n(10);n(44),n(45);var V=function(e){var t=e.title,n=e.children,i=e.onClose;return Object(c.useEffect)((function(){}),[]),Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:"glass dark-glass"}),Object(u.jsxs)("div",{className:"modalBox",children:[Object(u.jsx)("div",{className:"modalTitle",children:Object(u.jsxs)("div",{className:"modalTitleItems",children:[Object(u.jsx)("span",{children:t}),Object(u.jsx)("i",{class:"bi bi-x-square-fill",onClick:i})]})}),Object(u.jsx)("div",{className:"modalBody",children:n})]})]})},W=(n(46),function(){function e(){Object(r.a)(this,e),this.setGetChecks=function(){}}return Object(l.a)(e,[{key:"setShowFunc",value:function(e){this.setGetChecks=e}}]),e}());function Z(e){console.log("running");var t=this,n=Object(c.useState)(0),i=Object(o.a)(n,2),s=i[0],a=i[1],r=e.children,l=Object(c.useState)(r),j=Object(o.a)(l,2),d=j[0],h=j[1],b=function(e){a(e)};return Object(c.useEffect)((function(){e.ctl.setGetChecks((function(){return d}))}),[]),Object(u.jsx)("div",{className:"checkBox",children:d.map((function(e,n){return Object(u.jsxs)("div",{className:"checkItem ".concat(n==s?"selected":""),onClick:b.bind(t,n),children:[Object(u.jsx)("div",{onClick:function(){r[n].checked=!e.checked,h(r)},children:e.checked?Object(u.jsx)("i",{className:"bi bi-check2-square"}):Object(u.jsx)("i",{className:"bi bi-app"})}),Object(u.jsx)("div",{className:"checkName unsel",children:e.name})]})}))})}var Q=n(15);var X=function(e){var t,n=e.name,i=e.phone,s=e.level,a=e.parent,r=e.events,l=Object(c.useState)(!1),j=Object(o.a)(l,2),d=j[0],h=j[1],b=new W,f=Object(Q.useLongPress)((function(){window.navigator.vibrate(100),h(!0)})),O=Object(u.jsx)("i",{className:"bi bi-list"}),p=a?a.split(","):[],v=-1!=p.indexOf(s),m=!!r.filter((function(e){return e.id=s})).length;switch(p.length){case 0:t=1==r.length?r[0].parent:m?s:O;break;case 1:t=a;break;default:t=v?"".concat(s,"+").concat(p.length-1):"".concat(p[0],"+").concat(p.length-1)}var x="grey";return a&&(x="#005c4b"),Object(u.jsxs)("div",{className:"atcContact unsel",children:[Object(u.jsxs)("div",{className:"atcNamePhone",children:[Object(u.jsx)("div",{className:"atcName",children:n}),Object(u.jsx)("div",{className:"atcPhone",children:i})]}),Object(u.jsx)("div",Object(q.a)(Object(q.a)({className:"atcTick",style:{backgroundColor:x},onClick:function(){(new w).call("/attendance/mark",{phone:i,attendance:!0}).then((function(e){}))}},f()),{},{children:t})),d?Object(u.jsx)(V,{onClose:function(){return h(!1)},title:"Details",children:Object(u.jsx)(Z,{ctl:b,children:r.map((function(e){return{key:e.parent,name:e.parent,checked:-1!=p.indexOf(e.parent)}}))})}):null]},i)},Y=new B;var $=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],i=t[1],s=Object(c.useState)([]),a=Object(o.a)(s,2),r=a[0],l=a[1];Object(c.useEffect)((function(){var e="2022-01-30";document.getElementById("attendanceDate").value=e,function(e){(new w).call("/events",{date:e}).then((function(e){console.log(e.body),v(e.body),document.getElementById("attendanceDate").value=G()(e.body[0].date,"yyyy-MM-DDTHH:mm:ss.000Z").format("yyyy-MM-DD")}))}(e),(new w).call("/attendance/people",{date:e}).then((function(e){console.log(e),i(e.body),l(e.body)}))}),[]);var j=Object(c.useState)(""),d=Object(o.a)(j,2),h=d[0],b=d[1],f=Object(c.useState)([]),O=Object(o.a)(f,2),p=O[0],v=O[1];return Object(c.useEffect)((function(){l(h?n.filter((function(e){return e.name.toLowerCase().includes(h.toLowerCase())})):n)}),[h]),Object(u.jsxs)("div",{children:[Object(u.jsx)(P,{onPageMenuClick:function(){Y.position(".5vw","6.5vh"),Y.show()}}),Object(u.jsx)(E,{list:[1,2,3,4],ctl:Y}),Object(u.jsx)(_,{title:"Attendance",children:Object(u.jsx)(A,{type:"date",id:"attendanceDate"})}),Object(u.jsx)(A,{id:"attendanceSearch",placeholder:"search participant name or phone",onChange:function(e){b(e.target.value)}}),r.map((function(e){return Object(u.jsx)(X,{name:e.name,phone:e.phone,level:e.level,parent:e.parent,events:p})}))]})};n(47),n(48);var ee=function(e){var t=e.children,n=e.style,c=e.className;return Object(u.jsx)("div",{className:"paper ".concat(c),style:n,children:t})};n(49);var te=function(e){var t=e.list,n=e.onChange,i=e.disableAuto,s=e.searchKeys,a=e.defaultSearchKey,r=Object(c.useState)(!1),l=Object(o.a)(r,2),j=l[0],d=l[1],h=Object(c.useState)(t),b=Object(o.a)(h,2),f=b[0],O=b[1],p=Object(c.useState)(a||s[0].key),v=Object(o.a)(p,2),m=(v[0],v[1],Object(c.useRef)(null));return Object(u.jsxs)("div",{id:"searchRoot",children:[Object(u.jsxs)("div",{id:"searchBoxHolder",children:[Object(u.jsx)("div",{id:"fieldFilter",children:Object(u.jsx)("i",{className:"bi bi-person-fill"})}),Object(u.jsx)("input",{type:"text",ref:m,id:"searchInput",onFocus:function(){d(!0)},onBlur:function(){d(!1)},onChange:function(e){i?n(m.current.value):O(t.filter((function(e){return(e="".concat(e)).includes(m.current.value)})))}})]}),j&&!i?Object(u.jsx)("div",{id:"autoHolder",children:f.map((function(e){return Object(u.jsx)("div",{className:"autoElements",onClick:function(){m.current.value=e,n(e)},children:e},e)}))}):null]})},ne=[{key:"name",icon:"bi bi-person-fill"},{key:"phone",icon:"bi bi-telephone-fill"},{key:"buddy",icon:"bi bi-people-fill"}],ce=new B;var ie=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],i=t[1],s=Object(c.useState)(n),a=Object(o.a)(s,2),r=a[0],l=a[1],j=Object(c.useState)("name"),d=Object(o.a)(j,2),h=d[0],b=d[1];return Object(c.useEffect)((function(){(new w).call("/contacts").then((function(e){var t=e.body.contacts;i(t),l(t)}))}),[]),Object(u.jsxs)("div",{children:[Object(u.jsx)(P,{onPageMenuClick:function(){ce.position(".5vw","6.5vh"),ce.show()}}),Object(u.jsx)(E,{list:[1,1,2,4],ctl:ce}),Object(u.jsx)(_,{title:"Contacts"}),Object(u.jsxs)("div",{id:"contactsRoot",className:"pageRoot",children:[Object(u.jsx)(te,{searchKeys:ne,defaultSearchKey:"name",onSearchKeyChange:b,list:n.map((function(e){return e[h]})),onChange:function(e){l(n.filter((function(t){return"".concat(t[h]).toLowerCase().includes(e)})))},disableAuto:!0}),Object(u.jsx)("div",{id:"contactList",children:r.map((function(e){return Object(u.jsx)(ee,{className:"contactItem",children:Object(u.jsxs)("div",{className:"contactItemHolder",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{children:Object(u.jsx)("b",{children:e.name})}),Object(u.jsx)("div",{children:e.phone})]}),Object(u.jsxs)("div",{className:"actionButton",children:[isNaN(e.phone)?null:Object(u.jsx)("a",{href:"tel:+91".concat(e.phone),children:Object(u.jsx)("i",{className:"bi bi-telephone-fill actionButton"})}),isNaN(e.phone)?null:Object(u.jsx)("a",{href:"https://wa.me/91".concat(e.phone),target:"_blank",children:Object(u.jsx)("i",{className:"bi bi-whatsapp actionButton"})})]})]})},e.phone)}))})]})]})};var se=function(){return Object(c.useEffect)((function(){})),Object(u.jsx)("div",{className:"App",children:Object(u.jsx)(R.a,{children:Object(u.jsxs)(U.c,{children:[Object(u.jsx)(U.a,{path:"/login",element:Object(u.jsx)(C,{})}),Object(u.jsx)(U.a,{path:"/home",element:Object(u.jsx)(H,{})}),Object(u.jsx)(U.a,{path:"/contacts",element:Object(u.jsx)(ie,{})}),Object(u.jsx)(U.a,{path:"/attendance",element:Object(u.jsx)($,{})}),Object(u.jsx)(U.a,{path:"/contact/:filter",element:Object(u.jsx)(K,{ok:2})}),Object(u.jsx)(U.a,{path:"/test",element:Object(u.jsx)(L,{})})]})})})};a.a.render(Object(u.jsx)(i.a.StrictMode,{children:Object(u.jsx)(se,{})}),document.getElementById("root"))}]),[[50,1,2]]]);
//# sourceMappingURL=main.1732ed46.chunk.js.map